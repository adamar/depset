#!/bin/bash

#
# Example:
# 
#   "github.com/stretchr/testify"
#
# should become:
#
#   testify "github.com/stretchr/testify-9a3bde9" //depset
#


_usage() { 
cat<<EOF

    DepSet

    Usage:
      depset [commands]

    Commands:

      freeze - Save all dependencies to current version and 
               alias all imports



EOF

}


_init() {

  if [ -z "$GOROOT" ]; then
    echo "GOROOT not set"
    exit 1
  fi

  if [ -z "$GOPATH" ]; then
    echo "GOPATH not set"
    exit 1
  fi

}




_listdeps() {

  deps=($(grep "github.com\|gopkg.in\|code.google.com\|bitbucket.org\|azul3d.org" ${1} | sed -e 's/\"//' -e 's/\"//'))

  for dep in "${deps[@]}"
  do
    _freeze_dep ${dep}
  done

}


_freeze_dep() {

  echo "Freezing ${1}"

}



main() {

_init
_usage
_listdeps $1

}

main ${1}

